# test-task

## Задание

Устройство хранения данных типа лента (Tape) предназначено для последовательной записи и
чтения данных. Считывающая/записывающая магнитная головка неподвижна во время чтения и
записи, а лента имеет возможность двигаться в обоих направлениях. Запись и чтение информации
возможны в ячейку ленты, на которой в данный момент находится магнитная головка.
Перемещения ленты – затратная по времени операция – лента не предназначена для
произвольного доступа.

Имеется входная лента длины N (где N – велико), содержащая элементы типа integer ($2^{32}$).
Имеется выходная лента такой же длины. Необходимо записать в выходную ленту
отсортированные по возрастанию элементы с входной ленты. Есть ограничение по использованию
оперативной памяти – не более M байт (M может быть < N, т.е. загрузить все данные с ленты в
оперативную память не получится). Для реализации алгоритма можно использовать разумное
количество временных лент, т.е. лент, на которых можно хранить какую-то временную
информацию, необходимую в процессе работы алгоритма.
Необходимо создать проект С++, компилируемый в консольное приложение, которое реализует
алгоритм сортировки данных с входной ленты на выходную. Необходимо сделать следующее:

- Определить интерфейс для работы с устройством типа лента.
- Написать класс, реализующий этот интерфейс и эмулирующий работу с лентой посредством обычного файла. Должно быть возможно сконфигурировать (безперекомпиляции – например, через внешний конфигурационный файл, который будетпрочитан на старте приложения) задержки по записи/чтению элемента с ленты, перемоткиленты, и сдвига ленты на одну позицию.
- Файлы временных лент можно сохранять в директорию tmp.
- Написать класс, реализующий алгоритм сортировки данных с входной ленты на выходную.
- Консольное приложение должно принимать на вход имя входного и выходного файлов ипроизводить сортировку.
- Желательно написать юнит-тесты.

## Описание решения

- Для сортировки данных использовался merge sort с двумя временными лентами, также использовалась сортировка из стандарта, для сортировки блоков длины 8192, для того чтобы уменьшить количество итераций в merge sort итоговая асимптотика составляет `O(nlogn)`

- Для тестов использовался [doctest](https://github.com/doctest/doctest)

- А также использовалась библиотека [yaml-cpp](https://github.com/jbeder/yaml-cpp/tree/master?tab=readme-ov-file) для парсинга конфига

- Юнит тесты лежат в папке `test` 

## Сборка

В корневой директории проекта выполните

```bash
mkdir build && cd build
cmake ..
cmake --build
```

Далее в папке `build` появится исполняемый файл с решением `main` а также исполняемый файл для запуска тестов `unit_test`

Запуск решения выглядит следующим образом

``` bash
./main <input_file> <output_file>
```

## Использовнание конфига 
Создайте файл `config.yaml` и поместите рядом с исполняемым файлом, пример конфига можно увидеть в папке buildedApp

Сам конфиг представляет из себя yaml файл со следующими полями
```yaml
moveDelayMs: 1 # Задержка сдвига ленты в миллисекундах
resetTapeDelayMs: 10 # Задержка перемотки ленты в миллисекундах
readDelayMs: 5 # Задержка чтения в миллисекундах
writeDelayMs: 6 # Задержка записи в миллисекундах
```
